version: '2'
services:
  ansible:
    build: ansible/.
    links:
    - demo
    - front
    - zabbixserver
    - backend
    command: tail -F /var/log/test
    container_name: ansible
    volumes:
    - ./ansible/playbook/:/playbook/
  front:
    build: centos6_with_ssh/.
    links:
    - zabbixserver
    expose:
    - "22"
    ports:
    - "80:80"
    container_name: front
  demo:
    build: centos6_with_ssh/.
    expose:
    - "22"
    container_name: demo
  zabbixserver:
    build: centos6_with_ssh/.
    links:
    - backend
    expose:
    - "22"
    - "80"
    ports:
    - "8081:80"
    container_name: zabbixserver
    # command: tail -F /var/log/test
  backend:
    build: centos6_with_ssh/.
    expose:
    - "22"
    - "3306"
    ports:
    - "3306:3306"
    container_name: backend
    # command: tail -F /var/log/test
# volumes:
#   playbook:
#     external: true
